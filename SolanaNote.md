## **eBPF: Solana交易的执行基石**

以太坊上的智能合约通常使用高级语言Solidity来编写，而Solidity编译产生的字节码则运行在一个叫做以太坊虚拟机EVM的环境中。

Solana使用eBPF， eBPF能够以即时编译（JIT）模式直接将字节码转换成处理器可以直接执行的机器指令，从而更高效地运行程序。
eBPF拥有一套高效的指令集和成熟的基础设施。开发者只需要使用Rust语言即可编写智能合约。
LLVM编译框架提供了一个eBPF的后端，利用它可以直接将这些Rust语言编写的程序编译成可运行在eBPF虚拟机上的字节码。

## Solana账户模型

Solana上的数据以账户的形式存储。如下图所示，我们可将Solana中的所有数据视作一个庞大的键值对数据库。数据库的键是账户的地址，对于“钱包”账户（即由Solana用户通过公私钥对直接控制的账户）而言，这个地址是使用Ed25519签名系统生成的公钥；而数据库的值是该账户的具体信息，包含余额和其它相关信息。

Solana使用名为AccountInfo的结构来描述一个账户，其组成如下图所示。

Solana中的每个账户均包含四个字段。这里我们对其进行逐一解释。
*   **Data字段**存储了该账户有关的数据。如果该账户为一个程序（即智能合约���，则它存储的其实就是eBPF字节码。否则，Data中信息格式一般由账户创建者自行定义。
    
*   **Executable字段**用于标识该账户是否为程序。需要注意的是，与以太坊不同，Solana中的程序是可以更新的。
    
*   **Lamports字段**记录了该账户Solana代币的余额。Lamports实际上是SOL Token的最小单位（1 SOL = 10亿Lamports）。
    
*   **Owner字段**指示了当前账户的拥有者。在Solana中，任何一个账户都有一个“Owner”。例如，所有“钱包”账户的拥有者都是System Program，这是Solana网络上的一个特殊账户，负责账户创建等功能。账户拥有者是唯一能够修改账户数据和扣除Lamports余额的人（但任何人都可以增加Lamports，即向账户执行转账功能）。
